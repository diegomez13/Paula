_ "github.com/go-sql-driver/mysql"


func MysqlConnect() (*sql.DB, error) {

	dsn := "root:12345678@tcp(127.0.0.1:3306)/ControladorAI"
	db, err := sql.Open("mysql", dsn)
	if err != nil {
		fmt.Println("ERROR 1A")
		return nil, err
	}

	db.SetConnMaxLifetime(0)
	db.SetMaxOpenConns(10)
	db.SetMaxIdleConns(5)

	// Prueba la conexi√≥n
	err = db.Ping()
	if err != nil {
		fmt.Println("ERROR 1B")
		return nil, err
	}

	return db, nil
}

func (h *MyHandler) InsertPoolDb() (int, error) {

	sql, err := h.Db.Exec("INSERT INTO PoolServer (fecha_creacion) VALUES (NOW())")
	if err != nil {
		return 0, err
	}

	id, err := sql.LastInsertId()
	if err != nil {
		return 0, err
	}
	return int(id), nil
}

rows, err := db.Query("SELECT id_usr, nombre FROM usuarios WHERE ")
	if err != nil {
		return res, err
	}
	defer rows.Close()

	var id_usr int
	var nombre string

	for rows.Next() {
		if err := rows.Scan(&id_pos, &nombre); err != nil {
			return res, err
		}
		fmt.Println(id_usr, nombre)
	}








